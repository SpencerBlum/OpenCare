{"ast":null,"code":"var _jsxFileName = \"/Users/spencerblum/Development/projects/OpenCare/frontend/src/main/Review.js\";\nimport React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport Header from \"../component/Header.js\";\nimport swal from 'sweetalert';\nimport { Redirect } from 'react-router-dom';\nimport { newBusiness } from \"../actions/reviews.js\";\nimport { Rating } from 'semantic-ui-react';\n\nclass ReviewCard extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      formValue: \"\",\n      ratingValue: 5,\n      redirectShow: false\n    };\n\n    this.handleRating = e => {\n      this.setState({\n        ratingValue: e.target.value\n      });\n    };\n\n    this.handleChange = e => {\n      this.setState({\n        formValue: e.target.value\n      });\n    };\n\n    this.handleSubmit = () => {\n      if (this.state.formValue == \"\" || this.state.ratingValue == \"\") {\n        // swal(\"Must have Rating and Written Review\")\n        swal({\n          text: \"A review must have rating and written review\",\n          icon: \"warning\"\n        }); // swal(\"Good job!\", \"Must have Rating and Written Review!\", \"success\");\n      } else if (this.props.currentUser === null) {\n        swal(\"Sign in to write a review\");\n      } else {\n        let data = {\n          formValue: this.state.formValue,\n          ratingValue: this.state.ratingValue,\n          currentUser: this.props.currentUser.id,\n          currentBusiness: this.props.currentBusiness.id\n        };\n        console.log(data);\n        fetch('http://localhost:3000/review/new', {\n          method: 'POST',\n          // or 'PUT'\n          headers: {\n            'Content-Type': 'application/json'\n          },\n          body: JSON.stringify(data)\n        }).then(response => response.json()).then(data => {\n          console.log('Success:', data);\n          this.props.newBusiness(data);\n          this.setState({\n            redirectShow: true\n          });\n        }).catch(error => {\n          console.error('Error:', error);\n        });\n      }\n    };\n  }\n\n  render() {\n    if (this.state.redirectShow === true) {\n      return /*#__PURE__*/React.createElement(Redirect, {\n        to: \"/Show\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 70,\n          columnNumber: 24\n        }\n      });\n    } else {\n      return /*#__PURE__*/React.createElement(\"div\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 73,\n          columnNumber: 21\n        }\n      }, /*#__PURE__*/React.createElement(Header, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 74,\n          columnNumber: 25\n        }\n      }), \"Write a Review\", /*#__PURE__*/React.createElement(\"div\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 76,\n          columnNumber: 25\n        }\n      }, /*#__PURE__*/React.createElement(Rating, {\n        maxRating: 5,\n        defaultRating: 1,\n        icon: \"star\",\n        size: \"huge\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 77,\n          columnNumber: 25\n        }\n      })), /*#__PURE__*/React.createElement(\"select\", {\n        onChange: this.handleRating,\n        value: this.state.ratingValue,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 80,\n          columnNumber: 25\n        }\n      }, /*#__PURE__*/React.createElement(\"option\", {\n        value: \"1\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 81,\n          columnNumber: 29\n        }\n      }, \"1\"), /*#__PURE__*/React.createElement(\"option\", {\n        value: \"2\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 82,\n          columnNumber: 29\n        }\n      }, \"2\"), /*#__PURE__*/React.createElement(\"option\", {\n        value: \"3\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 83,\n          columnNumber: 29\n        }\n      }, \"3\"), /*#__PURE__*/React.createElement(\"option\", {\n        value: \"4\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 84,\n          columnNumber: 29\n        }\n      }, \"4\"), /*#__PURE__*/React.createElement(\"option\", {\n        value: \"5\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 85,\n          columnNumber: 29\n        }\n      }, \"5\")), /*#__PURE__*/React.createElement(\"br\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 90,\n          columnNumber: 25\n        }\n      }), /*#__PURE__*/React.createElement(\"br\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 92,\n          columnNumber: 25\n        }\n      }), /*#__PURE__*/React.createElement(\"textarea\", {\n        onChange: e => this.handleChange(e),\n        rows: \"20\",\n        cols: \"60\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 93,\n          columnNumber: 25\n        }\n      }), /*#__PURE__*/React.createElement(\"br\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 94,\n          columnNumber: 25\n        }\n      }), /*#__PURE__*/React.createElement(\"button\", {\n        onClick: this.handleSubmit,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 95,\n          columnNumber: 25\n        }\n      }, \" Submit \"));\n    }\n  }\n\n}\n\nconst mapStateToProps = state => {\n  return {\n    currentBusiness: state.currentBusiness,\n    currentUser: state.currentUser\n  };\n};\n\nconst mapDispatchToProps = dispatch => {\n  return {\n    newBusiness: business => {\n      dispatch(newBusiness(business));\n    }\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(ReviewCard);","map":{"version":3,"sources":["/Users/spencerblum/Development/projects/OpenCare/frontend/src/main/Review.js"],"names":["React","Component","connect","Header","swal","Redirect","newBusiness","Rating","ReviewCard","state","formValue","ratingValue","redirectShow","handleRating","e","setState","target","value","handleChange","handleSubmit","text","icon","props","currentUser","data","id","currentBusiness","console","log","fetch","method","headers","body","JSON","stringify","then","response","json","catch","error","render","mapStateToProps","mapDispatchToProps","dispatch","business"],"mappings":"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","sourcesContent":["import React, { Component} from 'react';\nimport { connect } from 'react-redux'\nimport Header from \"../component/Header.js\"\nimport swal from 'sweetalert';\nimport { Redirect } from 'react-router-dom';\nimport {newBusiness} from \"../actions/reviews.js\"\n\nimport { Rating } from 'semantic-ui-react'\n\n\n\nclass ReviewCard extends Component {\n\n    state = {\n        formValue: \"\",\n        ratingValue: 5,\n        redirectShow: false\n     }\n\n\n     handleRating = (e) => {\n        this.setState({ratingValue: e.target.value})\n    }\n\n    handleChange = (e) => {\n        this.setState({formValue: e.target.value})\n    }\n\n    handleSubmit= ()=> {\n        if(this.state.formValue ==\"\" || this.state.ratingValue ==\"\" ){\n            // swal(\"Must have Rating and Written Review\")\n            swal({ \n                text: \"A review must have rating and written review\",\n                icon: \"warning\"\n        })\n            // swal(\"Good job!\", \"Must have Rating and Written Review!\", \"success\");\n        } else if (this.props.currentUser === null){\n            swal(\"Sign in to write a review\")\n        } else {\n\n            let data = {\n                formValue: this.state.formValue,\n                ratingValue: this.state.ratingValue,\n                currentUser: this.props.currentUser.id,\n                currentBusiness: this.props.currentBusiness.id\n            }\n\n            console.log(data)\n            fetch('http://localhost:3000/review/new', {\n            method: 'POST', // or 'PUT'\n            headers: {\n                'Content-Type': 'application/json',\n            },\n            body: JSON.stringify(data),\n            })\n            .then(response => response.json())\n            .then(data => {\n            console.log('Success:', data);\n            this.props.newBusiness(data)\n            this.setState({redirectShow: true})\n            })\n            .catch((error) => {\n            console.error('Error:', error);\n            });\n        }   \n    }\n\n    render(){\n         if (this.state.redirectShow === true) {\n                return <Redirect to='/Show' />\n            } else {\n                return(\n                    <div>\n                        <Header/>\n                        Write a Review \n                        <div>\n                        <Rating maxRating={5} defaultRating={1} icon='star' size='huge' />\n                        </div>\n\n                        <select onChange={this.handleRating} value = {this.state.ratingValue} >\n                            <option value=\"1\">1</option>\n                            <option value=\"2\">2</option>\n                            <option value=\"3\">3</option>\n                            <option value=\"4\">4</option>\n                            <option value=\"5\">5</option>\n                        </select>\n\n\n\n                        <br/>\n                        \n                        <br/>\n                        <textarea onChange={(e) =>this.handleChange(e)}  rows=\"20\" cols=\"60\"  /> \n                        <br/>\n                        <button onClick={this.handleSubmit} > Submit </button> \n\n                    </div>\n                )\n            }\n        }\n}\n\nconst mapStateToProps = state =>  {\n    return { \n        currentBusiness: state.currentBusiness,\n        currentUser: state.currentUser\n    }\n}\n\nconst mapDispatchToProps = dispatch =>  {\n    return { \n        newBusiness: (business)=>{dispatch(newBusiness(business))}\n    }\n}\n\n\n\nexport default connect(mapStateToProps, mapDispatchToProps )(ReviewCard);"]},"metadata":{},"sourceType":"module"}