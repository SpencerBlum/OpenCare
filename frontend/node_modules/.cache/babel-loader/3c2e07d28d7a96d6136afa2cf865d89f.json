{"ast":null,"code":"var _jsxFileName = \"/Users/spencerblum/Development/projects/OpenCare/frontend/src/main/ResetPassword.js\";\nimport React from \"react\";\nimport swal from 'sweetalert';\nimport { useHistory } from \"react-router-dom\";\nimport { useSelector, useDispatch } from 'react-redux';\n\nconst ResetPassword = () => {\n  const dispatch = useDispatch();\n  const history = useHistory();\n  const state = useSelector(state => {\n    return {\n      currentUser: state.currentUser\n    };\n  });\n\n  if (state.currentUser === null) {\n    history.push(\"/login\");\n  } else {\n    const handleSubmit = e => {\n      e.preventDefault();\n      console.log(state);\n      const data = {\n        email: state.currentUser.email,\n        currentpassword: e.target.currentpassword.value,\n        newpassword: e.target.newpassword.value\n      };\n      fetch('http://localhost:3000/resetpassword', {\n        method: 'PATCH',\n        // or 'PUT'\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify(data)\n      }).then(response => response.json()).then(data => {\n        console.log('Success:', data);\n\n        if (data.error !== \"Invalid\") {\n          dispatch({\n            type: \"ADD_CURRENT_USER\",\n            payload: data\n          });\n          history.push('/Profile');\n        } else {\n          window.alert(\"Wrong Password\");\n        }\n      }).catch(error => {\n        console.error('Error:', error);\n      });\n    };\n\n    const handleBack = () => {\n      history.push(\"/Profile\");\n    };\n\n    return /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 66,\n        columnNumber: 5\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 67,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"h1\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 68,\n        columnNumber: 9\n      }\n    }, \" Reset Password\"), /*#__PURE__*/React.createElement(\"form\", {\n      onSubmit: e => handleSubmit(e),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 69,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 70,\n        columnNumber: 9\n      }\n    }, \" Current Passord: \"), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 71,\n        columnNumber: 9\n      }\n    }), /*#__PURE__*/React.createElement(\"input\", {\n      type: \"text\",\n      name: \"currentpassword\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 72,\n        columnNumber: 9\n      }\n    }), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 9\n      }\n    }), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 9\n      }\n    }), /*#__PURE__*/React.createElement(\"label\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 75,\n        columnNumber: 9\n      }\n    }, \" New Password: \"), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 76,\n        columnNumber: 9\n      }\n    }), /*#__PURE__*/React.createElement(\"input\", {\n      type: \"text\",\n      name: \"newpassword\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 9\n      }\n    }), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 78,\n        columnNumber: 9\n      }\n    }), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 79,\n        columnNumber: 9\n      }\n    }), /*#__PURE__*/React.createElement(\"input\", {\n      type: \"submit\",\n      value: \"Submit\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 9\n      }\n    })), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 82,\n        columnNumber: 9\n      }\n    }), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 83,\n        columnNumber: 9\n      }\n    }), /*#__PURE__*/React.createElement(\"button\", {\n      onClick: handleBack,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 9\n      }\n    }, \" Back\")));\n  }\n};\n\nexport default ResetPassword;","map":{"version":3,"sources":["/Users/spencerblum/Development/projects/OpenCare/frontend/src/main/ResetPassword.js"],"names":["React","swal","useHistory","useSelector","useDispatch","ResetPassword","dispatch","history","state","currentUser","push","handleSubmit","e","preventDefault","console","log","data","email","currentpassword","target","value","newpassword","fetch","method","headers","body","JSON","stringify","then","response","json","error","type","payload","window","alert","catch","handleBack"],"mappings":"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","sourcesContent":["\nimport React from \"react\"\nimport swal from 'sweetalert';\n\nimport { useHistory } from \"react-router-dom\";\nimport { useSelector,useDispatch } from 'react-redux'\n\nconst ResetPassword = () => {\n\nconst dispatch = useDispatch()\nconst history = useHistory()\n\n\n\nconst state = useSelector( state => {\n    return {currentUser: state.currentUser }  \n})\n\nif(state.currentUser === null){\n    history.push(\"/login\")\n} else {\n\nconst handleSubmit = (e) => {\ne.preventDefault()\n    console.log(state)\n\n\n    const data = { \n        email: state.currentUser.email,\n        currentpassword: e.target.currentpassword.value,\n        newpassword: e.target.newpassword.value\n}\n    fetch('http://localhost:3000/resetpassword', {\n    method: 'PATCH', // or 'PUT'\n    headers: {\n        'Content-Type': 'application/json',\n    },\n    body: JSON.stringify(data),\n    })\n    .then(response => response.json())\n    .then(data => {\n    console.log('Success:', data); \n    if (data.error !== \"Invalid\"){\n        dispatch({type: \"ADD_CURRENT_USER\", payload: data})\n        history.push('/Profile')\n        } else {\n            window.alert(\"Wrong Password\")\n        }\n    })\n    .catch((error) => {\n    console.error('Error:', error);\n    });\n}\n\n\n\nconst handleBack = () => {\nhistory.push(\"/Profile\")\n\n}\n\n\n\nreturn(\n\n    <div>\n        <div>\n        <h1> Reset Password</h1>\n        <form onSubmit= {(e)=> handleSubmit(e)} >\n        <label> Current Passord: </label>\n        <br/>\n        <input type= \"text\" name = \"currentpassword\" /> \n        <br/>\n        <br/>\n        <label> New Password: </label>\n        <br/>\n        <input type= \"text\" name = \"newpassword\"/> \n        <br/>\n        <br/>\n        <input type= \"submit\" value=\"Submit\" />\n        </form>\n        <br/>\n        <br/>\n        <button onClick={handleBack}> Back</button>\n\n\n        </div>\n\n\n    </div>\n)\n}\n}\nexport default ResetPassword"]},"metadata":{},"sourceType":"module"}